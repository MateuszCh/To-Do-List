!function(){function e(){localStorage.setItem("json_str",JSON.stringify(O))}function t(){S=[];for(var e=0;e<O.length;e++)O[e]&&O[e].category&&S.indexOf(O[e].category)<0&&S.push(O[e].category);S[0]&&S.unshift("all")}function a(){t(),T.innerHTML="";for(var e=0;e<S.length;e++){var a=document.createElement("li");a.classList.add("categories"),a.textContent=S[e],T.appendChild(a)}}function n(e){for(var t=0;t<x.length;t++)if(x[t].classList.remove("schow"),"all"!=e&&e){var a=x[t].dataset.indexNumber;(!O[a].category||O[a].category&&O[a].category!=e)&&x[t].classList.add("schow")}}function d(){for(var e=0;e<U.length;e++)U[e].classList.contains("picked")&&(v=void 0,U[e].classList.remove("picked"))}function s(e){"block"==e.style.display?(e.classList.add("slideUp"),setTimeout(function(){e.style.display="none",e.classList.remove("slideUp")},500)):"none"==e.style.display&&(e.style.display="block",e.classList.add("slideDown"),setTimeout(function(){e.classList.remove("slideDown")},500))}function l(e,t,a,n,d,s){this.title=e,this.description=t,this.category=a,this.time=n,this.date=d,this.color=s,this.completed=!1}function i(e){(window.matchMedia("(max-width: 1119px)").matches||e==C)&&(e.classList.add("slideUp"),setTimeout(function(){e.style.display="none",e.classList.remove("slideUp")},500));for(var t=document.getElementsByClassName("addFormInputs"),a=0;a<t.length;a++)t[a].value="";d(),c()}function o(){var e=window.innerWidth;e>A?window.matchMedia("(min-width: 1200px)").matches&&(B.style.display="block"):e<A&&(window.matchMedia("(min-width: 1200px)").matches?B.style.display="block":(A>1200&&e<1200||1200==A)&&(B.style.display="none")),A=e}function c(){I.innerHTML="",N.innerHTML="";for(var e=0;e<O.length;e++)if(void 0!=O[e]){var t=document.createElement("li");O[e].color&&(t.className=O[e].color),t.setAttribute("data-index-number",e),t.classList.add("listy");var n=document.createElement("input");n.type="checkbox",n.classList.add("completedCheckbox");var d="idy"+e;n.id=d;var s=document.createElement("label");s.setAttribute("for",d);var l=document.createElement("label");l.classList.add("task");var i=document.createElement("button");i.innerHTML='<i class="fa fa-trash deleteButton" aria-hidden="true"></i>',O[e].title?l.textContent=O[e].title:l.textContent=O[e].description;var o=document.createElement("label");o.textContent=O[e].time,o.classList.add("task");var c=document.createElement("label");c.textContent=O[e].category,c.classList.add("task");var u=document.createElement("label");u.textContent=O[e].date,u.classList.add("task"),t.appendChild(n),t.appendChild(s),t.appendChild(l),t.appendChild(c),t.appendChild(o),t.appendChild(u),t.appendChild(i),O[e].completed?(N.appendChild(t),n.checked=!0,t.classList.add("lisCom")):(I.appendChild(t),t.classList.add("lisUn"))}r(),m(),a()}function r(){if(I.firstChild){var e=document.getElementById("tasksHeader");e.classList.add("showHeader")}else{var e=document.getElementById("tasksHeader");e.classList.remove("showHeader")}if(N.firstChild){var e=document.getElementById("completedTasksHeader");e.classList.add("showHeader")}else{var e=document.getElementById("completedTasksHeader");e.classList.remove("showHeader")}}function m(){for(var e=0,t=0,a=0;a<O.length;a++)O[a]&&(e++,O[a].completed&&t++);H.textContent="Completed tasks: "+t+"/"+e}function u(e){q.value=e.title,z.value=e.category,G.value=e.description,K.value=e.time,P.value=e.date;for(var t=0;t<U.length;t++)U[t].classList.contains(e.color)&&U[t].classList.add("picked")}function g(t,a){for(var n=0;n<t.length;n++){var d=t[n].dataset.indexNumber;if(y&&"all"!=y){if(y&&O[d].category==y){t[n].classList.add("hide");var s=t[n];setTimeout(function(){a.removeChild(s)},500),delete O[d],e()}}else t[n].classList.add("hide"),setTimeout(function(){a.innerHTML=""},500),delete O[d],e()}setTimeout(function(){a.style.display="block"},501)}var p,v,y,f=document.getElementById("plus"),E=document.getElementById("close"),h=document.getElementById("closeEdit"),L=document.getElementById("save"),k=document.getElementById("addTask"),B=document.getElementById("addForm"),C=document.getElementById("editForm"),I=document.getElementById("tasks"),N=document.getElementById("completedTasks"),w=document.getElementsByClassName("lisUn"),b=document.getElementsByClassName("lisCom"),x=document.getElementsByClassName("listy"),T=document.getElementById("listOfCategories"),H=(document.getElementsByClassName("completedCheckbox"),document.getElementById("counter")),D=document.getElementById("tasksHeaderH2"),M=document.getElementById("completedTasksHeaderH2"),U=document.querySelectorAll(".colors div"),O=[],S=[],A=window.innerWidth,F=document.getElementById("title"),j=document.getElementById("category"),J=document.getElementById("content"),W=document.getElementById("time"),_=document.getElementById("data"),q=document.getElementById("titleEdit"),z=document.getElementById("categoryEdit"),G=document.getElementById("contentEdit"),K=document.getElementById("timeEdit"),P=document.getElementById("dataEdit");window.addEventListener("resize",function(){o()},!1),window.addEventListener("load",function(){var e=JSON.parse(localStorage.getItem("json_str"));e&&(O=e,c())},!1),document.addEventListener("click",function(t){if(t.target&&t.target.classList.contains("categories")){var d=document.getElementsByClassName("markedCategory")[0];d&&d.classList.remove("markedCategory"),y=t.target.textContent,t.target.classList.add("markedCategory"),n(y)}if(t.target&&t.target.classList.contains("deleteButton")){t.target.parentNode.parentNode.classList.add("hide");var s=t.target.parentNode.parentNode.dataset.indexNumber;delete O[s],setTimeout(function(){c()},500),void 0==O[O.length-1]&&O.pop(),e()}t.target&&t.target.classList.contains("completedCheckbox")&&(s=t.target.parentNode.dataset.indexNumber,t.target.checked?O[s].completed=!0:O[s].completed=!1,e(),c(),n(y)),t.target&&t.target.classList.contains("deleteAll")&&(t.target.parentNode.parentNode.parentNode.parentNode==document.getElementById("tasksHeader")||t.target.parentNode.parentNode==document.getElementById("tasksHeader")?g(w,I,!1):t.target.parentNode.parentNode.parentNode.parentNode!=document.getElementById("completedTasksHeader")&&t.target.parentNode.parentNode!=document.getElementById("completedTasksHeader")||g(b,N,!0),setTimeout(function(){r(),m(),a()},501)),t.target&&t.target.classList.contains("task")&&(s=t.target.parentNode.dataset.indexNumber,p=s,C.style.display="block",C.classList.add("slideDown"),setTimeout(function(){C.classList.remove("slideDown")},500),u(O[s]))},!1);for(var Q=0;Q<U.length;Q++)U[Q].addEventListener("click",function(e){d(),e.target.classList.add("picked"),v=e.target.className,v=v.slice(0,v.indexOf(" "))},!1);D.addEventListener("click",function(){s(I)},!1),M.addEventListener("click",function(){s(N)},!1),k.addEventListener("click",function(t){if(t.preventDefault(),F.value||J.value){var a=j.value.toLowerCase(),n=new l(F.value,J.value,a,W.value,_.value,v);O.push(n),i(B),e()}},!1),f.addEventListener("click",function(){B.style.display="block",B.classList.add("slideDown"),setTimeout(function(){B.classList.remove("slideDown")},500)},!1),L.addEventListener("click",function(t){t.preventDefault();var a=z.value.toLowerCase();O[p].title=q.value,O[p].category=a,O[p].description=G.value,O[p].time=K.value,O[p].date=P.value,v&&(O[p].color=v),i(C),y&&n(y),e()},!1),E.addEventListener("click",function(){i(B),n(y)},!1),h.addEventListener("click",function(){i(C),n(y)},!1)}();