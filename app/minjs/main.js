!function(){function e(){localStorage.setItem("json_str",JSON.stringify(S))}function t(){A=[];for(var e=0;e<S.length;e++)S[e]&&S[e].category&&A.indexOf(S[e].category)<0&&A.push(S[e].category);A[0]&&A.unshift("all")}function a(){t(),w.innerHTML="";for(var e=0;e<A.length;e++){var a=document.createElement("li");a.classList.add("categories"),a.textContent=A[e],w.appendChild(a)}p()}function n(e){for(var t=0;t<b.length;t++)if(b[t].classList.remove("schow"),"all"!=e&&e){var a=b[t].dataset.indexNumber;(!S[a].category||S[a].category&&S[a].category!=e)&&b[t].classList.add("schow")}}function d(){for(var e=0;e<O.length;e++)O[e].classList.contains("picked")&&(y=void 0,O[e].classList.remove("picked"))}function s(e){"block"==e.style.display?(e.classList.add("slideUp"),setTimeout(function(){e.style.display="none",e.classList.remove("slideUp")},500)):"none"==e.style.display&&(e.style.display="block",e.classList.add("slideDown"),setTimeout(function(){e.classList.remove("slideDown")},500))}function o(e,t,a,n,d,s){this.title=e,this.description=t,this.category=a,this.time=n,this.date=d,this.color=s,this.completed=!1}function l(e){e.classList.add("slideUp"),setTimeout(function(){e.style.display="none",e.classList.remove("slideUp")},500);for(var t=document.getElementsByClassName("addFormInputs"),a=0;a<t.length;a++)t[a].value="";d(),i()}function i(){I.innerHTML="",T.innerHTML="";for(var e=0;e<S.length;e++)if(void 0!=S[e]){var t=document.createElement("li");S[e].color&&(t.className=S[e].color),t.setAttribute("data-index-number",e),t.classList.add("listy");var n=document.createElement("input");n.type="checkbox",n.classList.add("completedCheckbox");var d="idy"+e;n.id=d;var s=document.createElement("label");s.setAttribute("for",d);var o=document.createElement("span");o.classList.add("task");var l=document.createElement("button");l.innerHTML='<i class="fa fa-trash deleteButton" aria-hidden="true"></i>',S[e].title?o.textContent=S[e].title:o.textContent=S[e].description;var i=document.createElement("span");i.textContent=S[e].time,i.classList.add("task");var m=document.createElement("span");m.textContent=S[e].category,m.classList.add("task");var u=document.createElement("span");u.textContent=S[e].date,u.classList.add("task"),t.appendChild(n),t.appendChild(s),t.appendChild(o),t.appendChild(m),t.appendChild(i),t.appendChild(u),t.appendChild(l),S[e].completed?(T.appendChild(t),n.checked=!0,t.classList.add("lisCom")):(I.appendChild(t),t.classList.add("lisUn"))}c(),r(),a()}function c(){if(I.firstChild){var e=document.getElementById("tasksHeader");e.classList.add("showHeader")}else{var e=document.getElementById("tasksHeader");e.classList.remove("showHeader")}if(T.firstChild){var e=document.getElementById("completedTasksHeader");e.classList.add("showHeader")}else{var e=document.getElementById("completedTasksHeader");e.classList.remove("showHeader")}}function r(){for(var e=0,t=0,a=0;a<S.length;a++)S[a]&&(e++,S[a].completed&&t++);D.textContent="Completed tasks: "+t+"/"+e}function m(e){z.value=e.title,G.value=e.category,K.value=e.description,P.value=e.time,Q.value=e.date;for(var t=0;t<O.length;t++)O[t].classList.contains(e.color)&&O[t].classList.add("picked")}function u(t,a){for(var n=0;n<t.length;n++){var d=t[n].dataset.indexNumber;if(f&&"all"!=f){if(f&&S[d].category==f){t[n].classList.add("hide");var s=t[n];setTimeout(function(e){e.parentNode.removeChild(e)},500,s),delete S[d],e()}}else t[n].classList.add("hide"),setTimeout(function(){a.innerHTML=""},500),delete S[d],e()}setTimeout(function(){a.style.display="block"},501)}function g(){for(var e=!1,t=0;t<S.length;t++)S[t]&&S[t].category&&S[t].category==f&&(e=!0);e||(f=void 0)}function p(){var e;if(f){var t=document.getElementsByClassName("markedCategory")[0];t&&t.classList.remove("markedCategory");for(var a=0;a<A.length;a++)A[a]==f&&(e=a);document.getElementsByClassName("categories")[e].classList.add("markedCategory")}}var v,y,f,E=document.getElementById("plus"),L=document.getElementById("close"),h=document.getElementById("closeEdit"),k=document.getElementById("save"),C=document.getElementById("addTask"),B=document.getElementById("addForm"),N=document.getElementById("editForm"),I=document.getElementById("tasks"),T=document.getElementById("completedTasks"),H=document.getElementsByClassName("lisUn"),x=document.getElementsByClassName("lisCom"),b=document.getElementsByClassName("listy"),w=document.getElementById("listOfCategories"),D=(document.getElementsByClassName("completedCheckbox"),document.getElementById("counter")),U=document.getElementById("tasksHeaderH2"),M=document.getElementById("completedTasksHeaderH2"),O=document.querySelectorAll(".colors div"),S=[],A=[],F=document.getElementById("title"),j=document.getElementById("category"),J=document.getElementById("content"),_=document.getElementById("time"),q=document.getElementById("data"),z=document.getElementById("titleEdit"),G=document.getElementById("categoryEdit"),K=document.getElementById("contentEdit"),P=document.getElementById("timeEdit"),Q=document.getElementById("dataEdit");window.addEventListener("load",function(){var e=JSON.parse(localStorage.getItem("json_str"));e&&(S=e,i())},!1),document.addEventListener("click",function(t){if(t.target&&t.target.classList.contains("categories")&&(f=t.target.textContent,p(),n(f)),t.target&&t.target.classList.contains("deleteButton")){t.target.parentNode.parentNode.classList.add("hide");var d=t.target.parentNode.parentNode.dataset.indexNumber;delete S[d],setTimeout(function(){t.target.parentNode.parentNode.parentNode.removeChild(t.target.parentNode.parentNode),c(),r(),g(),a(),f||i(),p()},510),void 0==S[S.length-1]&&S.pop(),e()}t.target&&t.target.classList.contains("completedCheckbox")&&(d=t.target.parentNode.dataset.indexNumber,t.target.checked?S[d].completed=!0:S[d].completed=!1,e(),i(),n(f)),t.target&&t.target.classList.contains("deleteAll")&&(t.target.parentNode.parentNode.parentNode==document.getElementById("tasksHeader")||t.target.parentNode.parentNode==document.getElementById("tasksHeader")?u(H,I,!1):t.target.parentNode.parentNode.parentNode!=document.getElementById("completedTasksHeader")&&t.target.parentNode.parentNode!=document.getElementById("completedTasksHeader")||u(x,T,!0),setTimeout(function(){c(),r(),g(),a(),f||i(),p()},501)),t.target&&t.target.classList.contains("task")&&(d=t.target.parentNode.dataset.indexNumber,v=d,N.style.display="block",N.classList.add("slideDown"),setTimeout(function(){N.classList.remove("slideDown")},500),m(S[d]))},!1);for(var R=0;R<O.length;R++)O[R].addEventListener("click",function(e){d(),e.target.classList.add("picked"),y=e.target.className,y=y.slice(0,y.indexOf(" "))},!1);U.addEventListener("click",function(){s(I)},!1),M.addEventListener("click",function(){s(T)},!1),C.addEventListener("click",function(t){if(t.preventDefault(),F.value||J.value){var a=j.value.toLowerCase(),d=new o(F.value,J.value,a,_.value,q.value,y);S.push(d),l(B),e(),n(f)}},!1),E.addEventListener("click",function(){B.style.display="block",B.classList.add("slideDown"),setTimeout(function(){B.classList.remove("slideDown")},500)},!1),k.addEventListener("click",function(t){t.preventDefault();var a=G.value.toLowerCase();S[v].title=z.value,S[v].category=a,S[v].description=K.value,S[v].time=P.value,S[v].date=Q.value,y&&(S[v].color=y),g(),l(N),f&&n(f),e()},!1),L.addEventListener("click",function(){l(B),n(f)},!1),h.addEventListener("click",function(){l(N),n(f)},!1)}();